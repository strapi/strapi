<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Models | Strapi Docs</title>
    <meta name="description" content="API creation made simple, secure and fast.">
    
    
    <link rel="preload" href="/documentation/assets/css/styles.a8210063.css" as="style"><link rel="preload" href="/documentation/assets/js/app.a8210063.js" as="script"><link rel="preload" href="/documentation/assets/js/16.5c84c402.js" as="script"><link rel="prefetch" href="/documentation/assets/js/28.9b077c15.js"><link rel="prefetch" href="/documentation/assets/css/1.styles.77d89b12.css"><link rel="prefetch" href="/documentation/assets/js/1.77d89b12.js"><link rel="prefetch" href="/documentation/assets/css/2.styles.08038ddb.css"><link rel="prefetch" href="/documentation/assets/js/2.08038ddb.js"><link rel="prefetch" href="/documentation/assets/js/3.4d92d5e3.js"><link rel="prefetch" href="/documentation/assets/js/4.385ae6a0.js"><link rel="prefetch" href="/documentation/assets/js/5.edd21cb3.js"><link rel="prefetch" href="/documentation/assets/js/6.fd6e4b24.js"><link rel="prefetch" href="/documentation/assets/js/7.e1f45fa9.js"><link rel="prefetch" href="/documentation/assets/js/8.dc78e1c2.js"><link rel="prefetch" href="/documentation/assets/js/9.fd6a21e6.js"><link rel="prefetch" href="/documentation/assets/js/10.f9e7d997.js"><link rel="prefetch" href="/documentation/assets/js/11.bfb9de0f.js"><link rel="prefetch" href="/documentation/assets/js/12.124227d1.js"><link rel="prefetch" href="/documentation/assets/js/13.d8092700.js"><link rel="prefetch" href="/documentation/assets/js/14.7cfd4cb8.js"><link rel="prefetch" href="/documentation/assets/js/15.55a20f7c.js"><link rel="prefetch" href="/documentation/assets/js/17.1c93d494.js"><link rel="prefetch" href="/documentation/assets/js/18.e1f1758f.js"><link rel="prefetch" href="/documentation/assets/js/19.8d1b00cd.js"><link rel="prefetch" href="/documentation/assets/js/20.856d7bdd.js"><link rel="prefetch" href="/documentation/assets/js/21.6f851286.js"><link rel="prefetch" href="/documentation/assets/js/22.7ddb4e1d.js"><link rel="prefetch" href="/documentation/assets/js/23.15e5a0c3.js"><link rel="prefetch" href="/documentation/assets/js/24.6fdf34d0.js"><link rel="prefetch" href="/documentation/assets/js/25.21c9a549.js"><link rel="prefetch" href="/documentation/assets/js/26.6608295c.js"><link rel="prefetch" href="/documentation/assets/js/27.2c9596ea.js"><link rel="prefetch" href="/documentation/assets/js/29.8ea8ecc1.js"><link rel="prefetch" href="/documentation/assets/js/30.5d2829b8.js"><link rel="prefetch" href="/documentation/assets/js/31.fad00a3a.js"><link rel="prefetch" href="/documentation/assets/js/32.a6900221.js"><link rel="prefetch" href="/documentation/assets/js/33.bbfb3084.js"><link rel="prefetch" href="/documentation/assets/js/34.0eb2f8aa.js"><link rel="prefetch" href="/documentation/assets/js/35.76c29241.js"><link rel="prefetch" href="/documentation/assets/js/36.dfcc07a1.js"><link rel="prefetch" href="/documentation/assets/js/37.173a8112.js"><link rel="prefetch" href="/documentation/assets/js/38.b86fac79.js"><link rel="prefetch" href="/documentation/assets/js/39.a7d50afe.js"><link rel="prefetch" href="/documentation/assets/js/40.0415492d.js"><link rel="prefetch" href="/documentation/assets/js/41.5ef681df.js"><link rel="prefetch" href="/documentation/assets/js/42.fdd80522.js"><link rel="prefetch" href="/documentation/assets/js/43.03b496f2.js"><link rel="prefetch" href="/documentation/assets/js/44.3f55a367.js"><link rel="prefetch" href="/documentation/assets/js/45.6746c3dc.js"><link rel="prefetch" href="/documentation/assets/js/46.ff6bc353.js"><link rel="prefetch" href="/documentation/assets/js/47.53b7147a.js"><link rel="prefetch" href="/documentation/assets/js/48.31a883aa.js"><link rel="prefetch" href="/documentation/assets/js/49.18bd1a60.js"><link rel="prefetch" href="/documentation/assets/js/50.9b6079cd.js"><link rel="prefetch" href="/documentation/assets/js/51.b67aee1b.js"><link rel="prefetch" href="/documentation/assets/js/52.62bc63b6.js"><link rel="prefetch" href="/documentation/assets/js/53.2c567c55.js"><link rel="prefetch" href="/documentation/assets/js/54.6cc10d25.js"><link rel="prefetch" href="/documentation/assets/js/55.7faca13f.js"><link rel="prefetch" href="/documentation/assets/js/56.0b06ad54.js"><link rel="prefetch" href="/documentation/assets/js/57.a87c48df.js"><link rel="prefetch" href="/documentation/assets/js/58.1c6547d9.js"><link rel="prefetch" href="/documentation/assets/js/59.06f908d7.js"><link rel="prefetch" href="/documentation/assets/js/60.b5156b8d.js"><link rel="prefetch" href="/documentation/assets/js/61.1d5cafa9.js"><link rel="prefetch" href="/documentation/assets/js/62.ccacebe2.js"><link rel="prefetch" href="/documentation/assets/js/63.66946dde.js"><link rel="prefetch" href="/documentation/assets/js/64.d53bdeb7.js"><link rel="prefetch" href="/documentation/assets/js/65.0cd2da1f.js"><link rel="prefetch" href="/documentation/assets/js/66.03059dce.js"><link rel="prefetch" href="/documentation/assets/js/67.6f988923.js"><link rel="prefetch" href="/documentation/assets/js/68.303c1a05.js"><link rel="prefetch" href="/documentation/assets/js/69.3f4ed952.js"><link rel="prefetch" href="/documentation/assets/js/70.531d76be.js"><link rel="prefetch" href="/documentation/assets/js/71.ab3e74fc.js">
    <link rel="stylesheet" href="/documentation/assets/css/styles.a8210063.css"><link rel="stylesheet" href="/documentation/assets/css/1.styles.77d89b12.css"><link rel="stylesheet" href="/documentation/assets/css/2.styles.08038ddb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/documentation/" class="home-link router-link-active"><!----> <span class="site-name">
      Strapi Docs
    </span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/strapi/strapi" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"> <a href="https://github.com/strapi/strapi" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav> <div><select class="version-selector"><option value="/3.x.x/">Version 3.x.x</option><option value="/1.x.x/" selected="selected">Version 1.x.x</option></select></div> <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>UsefulLinks</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/documentation/1.x.x/" class="sidebar-link">Introduction</a></li><li><a href="https://strapi.io" class="sidebar-link">Strapi Website</a></li><li><a href="https://github.com/strapi/strapi" class="sidebar-link">GitHub Repository</a></li><li><a href="https://github.com/strapi/strapi/blob/master/CONTRIBUTING.md" class="sidebar-link">Contribution Guide</a></li></ul></div></li><li><a href="/documentation/1.x.x/admin.html" class="sidebar-link">Admin</a></li><li><a href="/documentation/1.x.x/configuration.html" class="sidebar-link">Configuration</a></li><li><a href="/documentation/1.x.x/email.html" class="sidebar-link">Email</a></li><li><a href="/documentation/1.x.x/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/documentation/1.x.x/queries.html" class="sidebar-link">Query Interface</a></li><li><a href="/documentation/1.x.x/response.html" class="sidebar-link">Response</a></li><li><a href="/documentation/1.x.x/sessions.html" class="sidebar-link">Sessions</a></li><li><a href="/documentation/1.x.x/testing.html" class="sidebar-link">Testing</a></li><li><a href="/documentation/1.x.x/views.html" class="sidebar-link">Views</a></li><li><a href="/documentation/1.x.x/blueprints.html" class="sidebar-link">Blueprints</a></li><li><a href="/documentation/1.x.x/context.html" class="sidebar-link">Context</a></li><li><a href="/documentation/1.x.x/graphql.html" class="sidebar-link">GraphQL</a></li><li><a href="/documentation/1.x.x/logging.html" class="sidebar-link">Logging</a></li><li><a href="/documentation/1.x.x/router.html" class="sidebar-link">Router</a></li><li><a href="/documentation/1.x.x/upload.html" class="sidebar-link">Upload</a></li><li><a href="/documentation/1.x.x/cli.html" class="sidebar-link">CLI</a></li><li><a href="/documentation/1.x.x/customization.html" class="sidebar-link">Customization</a></li><li><a href="/documentation/1.x.x/internationalization.html" class="sidebar-link">Internationalization</a></li><li><a href="/documentation/1.x.x/models.html" class="active sidebar-link">Models</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/documentation/1.x.x/models.html#model-settings" class="sidebar-link">Model settings</a></li><li class="sidebar-sub-header"><a href="/documentation/1.x.x/models.html#associations" class="sidebar-link">Associations</a></li><li class="sidebar-sub-header"><a href="/documentation/1.x.x/models.html#lifecycle-callbacks" class="sidebar-link">Lifecycle Callbacks</a></li></ul></li><li><a href="/documentation/1.x.x/request.html" class="sidebar-link">Request</a></li><li><a href="/documentation/1.x.x/services.html" class="sidebar-link">Services</a></li><li><a href="/documentation/1.x.x/users.html" class="sidebar-link">Users</a></li></ul> </div> <div class="page"><div class="content"><h1 id="models"><a href="#models" aria-hidden="true" class="header-anchor">#</a> Models</h1> <p>Strapi comes installed with a powerful Object-Relational-Mapper (ORM) called Waterline,
a datastore-agnostic tool that dramatically simplifies interaction with one or more databases.</p> <p>Models represent a structure of data which requires persistent storage. The data may live in any data-store
but is interfaced in the same way. This allows your users to live in PostgreSQL and your user preferences
to live in MongoDB and you will interact with the data models in the exact same way.</p> <p>If you're using MySQL, a model might correspond to a table. If you're using MongoDB, it might correspond
to a collection. In either case, the goal is to provide a simple, modular way of managing data without
relying on any one type of database.</p> <p>Models are defined in the <code>./api/&lt;apiName&gt;/models</code> directory.</p> <h2 id="model-settings"><a href="#model-settings" aria-hidden="true" class="header-anchor">#</a> Model settings</h2> <p>The following properties can be specified at the top level of your model definition to override
the defaults for that particular model.</p> <p>For example, this a basic model <code>Pet</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;identity&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;pet&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;connection&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;mongoDBServer&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;schema&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token string">&quot;attributes&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;required&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;gender&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;enum&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;male&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;female&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;age&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;int&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;max&quot;</span><span class="token punctuation">:</span> <span class="token number">100</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;birthDate&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;date&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;breed&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;autoPK&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token string">&quot;autoCreatedAt&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token string">&quot;autoUpdatedAt&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="schema"><a href="#schema" aria-hidden="true" class="header-anchor">#</a> schema</h3> <p>A flag to toggle schemaless or schema mode in databases that support schemaless data structures.
If turned off, this will allow you to store arbitrary data in a record. If turned on, only attributes
defined in the model's attributes object will be stored.</p> <p>For adapters that don't require a schema, such as MongoDB or Redis, the <code>schema</code> key is set to <code>false</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;schema&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token operator">|</span><span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="connection"><a href="#connection" aria-hidden="true" class="header-anchor">#</a> connection</h3> <p>The configured database connection where this model will fetch and save its data.
Defaults to <code>defaultSQLite</code>, the default connection that uses the <code>waterline-sqlite3</code> adapter.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;connection&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;mongoDBServer&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="identity"><a href="#identity" aria-hidden="true" class="header-anchor">#</a> identity</h3> <p>The lowercase unique key for the model. By default, a model's identity is inferred automatically
by lowercasing its filename. You should never change this property on your models.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;identity&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;petModel&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="globalid"><a href="#globalid" aria-hidden="true" class="header-anchor">#</a> globalId</h3> <p>This flag changes the global name by which you can access your model (if the globalization of models
is enabled). You should never change this property on your models.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;globaId&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;pets&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>For example to access to your model function:</p> <div class="language-js extra-class"><pre class="language-js"><code>Pets<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>error<span class="token punctuation">,</span> pets<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pets<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="autopk"><a href="#autopk" aria-hidden="true" class="header-anchor">#</a> autoPK</h3> <p>A flag to toggle the automatic definition of a primary key in your model.
The details of this default primary key vary between adapters. In any case, the primary keys generated
by <code>autoPK</code> will be unique. If turned off no primary key will be created by default, and you will need
to define one manually using <code>primaryKey: true</code> for one of the model attributes.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;autoPK&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token operator">|</span><span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="autocreatedat"><a href="#autocreatedat" aria-hidden="true" class="header-anchor">#</a> autoCreatedAt</h3> <p>A flag to toggle the automatic definition of a <code>createdAt</code> attribute in your model.
By default, <code>createdAt</code> is an attribute which will be automatically set when a record is created with
the current timestamp.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;autoCreatedAt&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token operator">|</span><span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="autoupdatedat"><a href="#autoupdatedat" aria-hidden="true" class="header-anchor">#</a> autoUpdatedAt</h3> <p>A flag to toggle the automatic definition of a <code>updatedAt</code> attribute in your model.
By default, <code>updatedAt</code> is an attribute which will be automatically set with the current timestamp
every time a record is updated.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;autoUpdatedAt&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token operator">|</span><span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="tablename"><a href="#tablename" aria-hidden="true" class="header-anchor">#</a> tableName</h3> <p>You can define a custom name for the physical collection in your adapter by adding a <code>tableName</code>
attribute. This isn't just for tables. In MySQL, PostgreSQL, Oracle, etc. this setting refers
to the name of the table, but in MongoDB or Redis, it refers to the collection, and so forth.
If no <code>tableName</code> is specified, Waterline will use the model's <code>identity</code> as its <code>tableName</code>.</p> <p>This is particularly useful for working with pre-existing/legacy databases.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;tableName&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;pets_table&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="attributes"><a href="#attributes" aria-hidden="true" class="header-anchor">#</a> attributes</h3> <p>Model attributes are basic pieces of information about a model.
A model called <code>Pet</code> might have attributes called <code>name</code>, <code>gender</code>, <code>age</code>,
<code>birthday</code> and <code>breed</code>.</p> <p>Options can be used to enforce various constraints and add special enhancements to model attributes.</p> <h4 id="type"><a href="#type" aria-hidden="true" class="header-anchor">#</a> type</h4> <p>Specifies the type of data that will be stored in this attribute. One of:</p> <ul><li><code>string</code></li> <li><code>text</code></li> <li><code>integer</code></li> <li><code>float</code></li> <li><code>date</code></li> <li><code>datetime</code></li> <li><code>boolean</code></li> <li><code>binary</code></li> <li><code>array</code></li> <li><code>json</code></li></ul> <p>Defaults to <code>string</code> if not specified.</p> <h3 id="validations"><a href="#validations" aria-hidden="true" class="header-anchor">#</a> Validations</h3> <p>Strapi bundles support for automatic validations of your models' attributes.
Any time a record is updated, or a new record is created, the data for each attribute will
be checked against all of your predefined validation rules. This provides a convenient failsafe
to ensure that invalid entries don't make their way into your application's database(s).</p> <p>Validations are defined directly in your collection attributes.</p> <ul><li><code>after</code> (date): Checks if string date in this record is after the specified <code>Date</code>.
Must be valid JavaScript <code>Date</code>.</li> <li><code>alpha</code> (boolean): Checks if string in this record contains only letters (a-zA-Z).</li> <li><code>alphadashed</code> (boolean): Checks if string in this record contains only numbers and/or dashes.</li> <li><code>alphanumeric</code> (boolean): Checks if string in this record contains only letters and numbers.</li> <li><code>alphanumericdashed</code> (boolean): Checks if string in this record contains only numbers and/or
letters and/or dashes.</li> <li><code>array</code> (boolean): Checks if this record is a valid JavaScript array object.
Strings formatted as arrays will fail.</li> <li><code>before</code> (date): Checks if string in this record is a date that's before the specified date.</li> <li><code>binary</code> (boolean): Checks if this record is a valid binary data. Strings will pass.</li> <li><code>boolean</code> (boolean): Checks if this record is a valid boolean. Strings will fail.</li> <li><code>contains</code> (string): Checks if string in this record contains the seed.</li> <li><code>creditcard</code> (boolean): Checks if string in this record is a credit card.</li> <li><code>date</code> (boolean): Checks if string in this record is a date takes both strings and JavaScript.</li> <li><code>datetime</code> (boolean): Checks if string in this record looks like a JavaScript <code>datetime</code>.</li> <li><code>decimal</code> (boolean): Checks if it contains a decimal or is less than 1.</li> <li><code>email</code> (boolean): Checks if string in this record looks like an email address.</li> <li><code>empty</code> (boolean): Checks if the entry is empty. Arrays, strings, or arguments objects with
a length of 0 and objects with no
own enumerable properties are considered empty.</li> <li><code>equals</code> (integer): Checks if string in this record is equal to the specified value.
They must match in both value and type.</li> <li><code>falsey</code> (boolean): Would a Javascript engine register a value of <code>false</code> on this?.</li> <li><code>finite</code> (boolean): Checks if given value is, or can be coerced to, a finite number.
This is not the same as native <code>isFinite</code>
which will return <code>true</code> for booleans and empty strings.</li> <li><code>float</code> (boolean): Checks if string in this record is of the number type float.</li> <li><code>hexadecimal</code> (boolean): Checks if string in this record is a hexadecimal number.</li> <li><code>hexColor</code> (boolean): Checks if string in this record is a hexadecimal color.</li> <li><code>in</code> (array): Checks if string in this record is in the specified array of allowed
string values.</li> <li><code>int</code> (boolean): Check if string in this record is an integer.</li> <li><code>integer</code> (boolean): Check if string in this record is an integer. Alias for <code>int</code>.</li> <li><code>ip</code> (boolean): Checks if string in this record is a valid IP (v4 or v6).</li> <li><code>ipv4</code> (boolean): Checks if string in this record is a valid IP v4.</li> <li><code>ipv6</code> (boolean): Checks if string in this record is aa valid IP v6.</li> <li><code>json</code> (boolean): Checks if the record is a JSON.</li> <li><code>lowercase</code> (boolean): Check if string in this record is in all lowercase.</li> <li><code>max</code> (integer): max value for an integer.</li> <li><code>maxLength</code> (integer):</li> <li><code>min</code> (integer): min value for an integer.</li> <li><code>minLength</code> (integer):</li> <li><code>notContains</code> (string): Checks if string in this record doesn't contain the seed.</li> <li><code>notIn</code> (array): does the value of this model attribute exist inside of the defined
validator value (of the same type).
Takes strings and arrays.</li> <li><code>notNull</code> (boolean): does this not have a value of <code>null</code> ?.</li> <li><code>null</code> (boolean): Checks if string in this record is null.</li> <li><code>number</code> (boolean): Checks if this record is a number. <code>NaN</code> is considered a number.</li> <li><code>numeric</code> (boolean): Checks if string in this record contains only numbers.</li> <li><code>object</code> (boolean): Checks if this attribute is the language type of Object.
Passes for arrays, functions, objects,
regexes, new Number(0), and new String('') !</li> <li><code>regex</code> (regex): Checks if the record matches the specific regex.</li> <li><code>required</code> (boolean): Must this model attribute contain valid data before a new
record can be created?.</li> <li><code>string</code> (boolean): Checks if the record is a string.</li> <li><code>text</code> (boolean): Checks if the record is a text.</li> <li><code>truthy</code> (boolean): Would a Javascript engine register a value of <code>false</code> on this?</li> <li><code>undefined</code> (boolean): Would a JavaScript engine register this thing as have the
value <code>undefined</code>?</li> <li><code>uppercase</code> (boolean): Checks if string in this record is uppercase.</li> <li><code>url</code> (boolean): Checks if string in this record is a URL.</li> <li><code>urlish</code> (boolean): Checks if string in this record contains something that looks like
a route, ending with a file extension.</li> <li><code>uuid</code> (boolean): Checks if string in this record is a UUID (v3, v4, or v5).</li> <li><code>uuidv3</code> (boolean): Checks if string in this record is a UUID (v3).</li> <li><code>uuidv4</code> (boolean): Checks if string in this record is a UUID (v4).</li></ul> <h4 id="defaultsto"><a href="#defaultsto" aria-hidden="true" class="header-anchor">#</a> defaultsTo</h4> <p>When a record is created, if no value was supplied, the record will be created with the specified
<code>defaultsTo</code> value.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;attributes&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;usersGroup&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;defaultsTo&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;guess&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="autoincrement"><a href="#autoincrement" aria-hidden="true" class="header-anchor">#</a> autoIncrement</h4> <p>Sets up the attribute as an auto-increment key. When a new record is added to the model,
if a value for this attribute is not specified, it will be generated by incrementing the most recent
record's value by one.</p> <p>Attributes which specify <code>autoIncrement</code> should always be of <code>type: integer</code>.
Also, bear in mind that the level of support varies across different datastores.
For instance, MySQL will not allow more than one auto-incrementing column per table.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;attributes&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;placeInLine&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;integer&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;autoIncrement&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="unique"><a href="#unique" aria-hidden="true" class="header-anchor">#</a> unique</h4> <p>Ensures no two records will be allowed with the same value for the target attribute.
This is an adapter-level constraint, so in most cases this will result in a unique index on the
attribute being created in the underlying datastore.</p> <p>Defaults to <code>false</code> if not specified.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;attributes&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;username&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;unique&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="primarykey"><a href="#primarykey" aria-hidden="true" class="header-anchor">#</a> primaryKey</h4> <p>Use this attribute as the the primary key for the record. Only one attribute per model can be the
<code>primaryKey</code>. Defaults to <code>false</code> if not specified.</p> <p>This should never be used unless <code>autoPK</code> is set to <code>false</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;attributes&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;uuid&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;primaryKey&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string">&quot;required&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="enum"><a href="#enum" aria-hidden="true" class="header-anchor">#</a> enum</h4> <p>A special validation property which only saves data which matches a whitelisted set of values.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;attributes&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;gender&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;enum&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;male&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;female&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="size"><a href="#size" aria-hidden="true" class="header-anchor">#</a> size</h4> <p>If supported in the adapter, can be used to define the size of the attribute.
For example in MySQL, <code>size</code> can be specified as a number (<code>n</code>) to create a column with the SQL
data type: <code>varchar(n)</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;attributes&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;size&quot;</span><span class="token punctuation">:</span> <span class="token number">24</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="columnname"><a href="#columnname" aria-hidden="true" class="header-anchor">#</a> columnName</h4> <p>Inside an attribute definition, you can specify a <code>columnName</code> to force Waterline to store data
for that attribute in a specific column in the configured connection.
Be aware that this is not necessarily SQL-specific. It will also work for MongoDB fields, etc.</p> <p>While the <code>columnName</code> property is primarily designed for working with existing/legacy databases,
it can also be useful in situations where your database is being shared by other applications,
or you don't have access permissions to change the schema.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;attributes&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;columnName&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;pet_name&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="associations"><a href="#associations" aria-hidden="true" class="header-anchor">#</a> Associations</h2> <p>With Waterline you can associate models with other models across all data stores.
This means that your users can live in PostgreSQL and their photos can live in MongoDB
and you can interact with the data as if they lived together on the same database.
You can also have associations that live on separate connections or in different databases
within the same adapter.</p> <h3 id="one-way-associations"><a href="#one-way-associations" aria-hidden="true" class="header-anchor">#</a> One-Way associations</h3> <p>A one-way association is where a model is associated with another model.
You could query that model and populate to get the associated model.
You can't however query the associated model and populate to get the associating model.</p> <p>In this example, we are associating a <code>User</code> with a <code>Pet</code> but not a <code>Pet</code> with a <code>User</code>.
Because we have only formed an association on one of the models, a <code>Pet</code> has no restrictions
on the number of <code>User</code> models it can belong to. If we wanted to, we could change this and
associate the <code>Pet</code> with exactly one <code>User</code> and the <code>User</code> with exactly one <code>Pet</code>.</p> <p><code>./api/pet/models/Pet.settings.json</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;attributes&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;required&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token string">&quot;unique&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;color&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;required&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>./api/user/models/User.settings.json</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;attributes&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;required&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token string">&quot;unique&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;color&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;required&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;pony&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;model&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;pet&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="one-to-one-associations"><a href="#one-to-one-associations" aria-hidden="true" class="header-anchor">#</a> One-to-One associations</h3> <p>A one-to-one association states that a model may only be associated with one other model.
In order for the model to know which other model it is associated with a foreign key must
be included in the record.</p> <p>In this example, we are associating a <code>Pet</code> with a <code>User</code>. The <code>User</code> may only have one
<code>Pet</code> and viceversa, a <code>Pet</code> can only have one <code>User</code>. However, in order to query this association
from both sides, you will have to create/update both models.</p> <p><code>./api/pet/models/Pet.settings.json</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;attributes&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;required&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token string">&quot;unique&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;color&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;required&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;owner&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;model&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;user&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>./api/user/models/User.settings.json</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;attributes&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;required&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token string">&quot;unique&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;age&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;integer&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;required&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;pony&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;model&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;pet&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="one-to-many-associations"><a href="#one-to-many-associations" aria-hidden="true" class="header-anchor">#</a> One-to-Many associations</h3> <p>A one-to-many association states that a model can be associated with many other models.
To build this association a virtual attribute is added to a model using the <code>collection</code> property.
In a one-to-many association one side must have a <code>collection</code> attribute and the other side must contain a
<code>model</code> attribute. This allows the many side to know which records it needs to get when a <code>populate</code> is used.</p> <p>Because you may want a model to have multiple one-to-many associations on another model a <code>via</code> key is
needed on the <code>collection</code> attribute. This states which <code>model</code> attribute on the one side of the association
is used to populate the records.</p> <p>In this example, a <code>User</code> can have several <code>Pet</code>, but a <code>Pet</code> has only one <code>owner</code> (from the <code>User</code> model).</p> <p><code>./api/pet/models/Pet.settings.json</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;attributes&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;required&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token string">&quot;unique&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;color&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;required&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;owner&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;model&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;user&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>./api/user/models/User.settings.json</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;attributes&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;required&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token string">&quot;unique&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;age&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;integer&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;required&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;pets&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;collection&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;pet&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;via&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;owner&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="many-to-many-associations"><a href="#many-to-many-associations" aria-hidden="true" class="header-anchor">#</a> Many-to-Many associations</h3> <p>A many-to-many association states that a model can be associated with many other models
and vice-versa. Because both models can have many related models a new join table will
need to be created to keep track of these relations.</p> <p>Waterline will look at your models and if it finds that two models both have <code>collection</code>
attributes that point to each other, it will automatically build up a join table for you.</p> <p>Because you may want a model to have multiple many-to-many associations on another model
a <code>via</code> key is needed on the <code>collection</code> attribute. This states which <code>model</code> attribute on the
one side of the association is used to populate the records.</p> <p>Using the <code>User</code> and <code>Pet</code> example lets look at how to build a schema where a <code>User</code> may
have many <code>Pet</code> records and a <code>Pet</code> may have multiple owners.</p> <p>In this example, we will start with an array of users and an array of pets.
We will create records for each element in each array then associate all of the <code>Pets</code> with all
of the <code>Users</code>. If everything worked properly, we should be able to query any <code>User</code> and see that
they <em>own</em> all of the <code>Pets</code>. Furthermore, we should be able to query any <code>Pet</code> and see that
it is <em>owned</em> by every <code>User</code>.</p> <p><code>./api/pet/models/Pet.settings.json</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;attributes&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;required&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token string">&quot;unique&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;color&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;required&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;owners&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;collection&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;via&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;pets&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>./api/user/models/User.settings.json</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;attributes&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;required&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token string">&quot;unique&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;age&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;integer&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;required&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;pets&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;collection&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;pet&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;via&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;owners&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="lifecycle-callbacks"><a href="#lifecycle-callbacks" aria-hidden="true" class="header-anchor">#</a> Lifecycle Callbacks</h2> <p>Lifecycle callbacks are functions you can define to run at certain times in a query.
They are hooks that you can tap into in order to change data.</p> <p>Strapi exposes a handful of lifecycle callbacks by default.</p> <h3 id="callbacks-on-create"><a href="#callbacks-on-create" aria-hidden="true" class="header-anchor">#</a> Callbacks on create</h3> <ul><li><code>beforeValidate</code>: <code>fn(values, cb)</code></li> <li><code>afterValidate</code>: <code>fn(values, cb)</code></li> <li><code>beforeCreate</code>: <code>fn(values, cb)</code></li> <li><code>afterCreate</code>: <code>fn(newlyInsertedRecord, cb)</code></li></ul> <h3 id="callbacks-on-update"><a href="#callbacks-on-update" aria-hidden="true" class="header-anchor">#</a> Callbacks on update</h3> <ul><li><code>beforeValidate: fn(valuesToUpdate, cb)</code></li> <li><code>afterValidate: fn(valuesToUpdate, cb)</code></li> <li><code>beforeUpdate: fn(valuesToUpdate, cb)</code></li> <li><code>afterUpdate: fn(updatedRecord, cb)</code></li></ul> <h3 id="callbacks-on-destroy"><a href="#callbacks-on-destroy" aria-hidden="true" class="header-anchor">#</a> Callbacks on destroy</h3> <ul><li><code>beforeDestroy</code>: <code>fn(criteria, cb)</code></li> <li><code>afterDestroy</code>: <code>fn(deletedRecord, cb)</code></li></ul> <p>For example, this could be your <code>./api/pet/models/Pet.js</code> file:</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">/**
   * Basic settings
   */</span>

  <span class="token comment">// The identity to use.</span>
  identity<span class="token punctuation">:</span> settings<span class="token punctuation">.</span>identity<span class="token punctuation">,</span>

  <span class="token comment">// The connection to use.</span>
  connection<span class="token punctuation">:</span> settings<span class="token punctuation">.</span>connection<span class="token punctuation">,</span>

  <span class="token comment">// Do you want to respect schema?</span>
  schema<span class="token punctuation">:</span> settings<span class="token punctuation">.</span>schema<span class="token punctuation">,</span>

  <span class="token comment">// Merge simple attributes from settings with those ones.</span>
  attributes<span class="token punctuation">:</span> _<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>settings<span class="token punctuation">.</span>attributes<span class="token punctuation">,</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

  <span class="token comment">// Do you automatically want to have time data?</span>
  autoCreatedAt<span class="token punctuation">:</span> settings<span class="token punctuation">.</span>autoCreatedAt<span class="token punctuation">,</span>
  autoUpdatedAt<span class="token punctuation">:</span> settings<span class="token punctuation">.</span>autoUpdatedAt<span class="token punctuation">,</span>

  <span class="token comment">/**
   * Lifecycle callbacks on create
   */</span>

  <span class="token comment">// Before creating a value.</span>
  beforeCreate<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>values<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Do some stuff</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// After creating a value.</span>
  afterCreate<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>newlyInsertedRecord<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Do some stuff</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * Lifecycle callbacks on update
   */</span>

  <span class="token comment">// Before updating a value.</span>
  beforeUpdate<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>valuesToUpdate<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Do some stuff</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// After updating a value.</span>
  afterUpdate<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>updatedRecord<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Do some stuff</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * Lifecycle callbacks on destroy
   */</span>

  <span class="token comment">// Before destroying a value.</span>
  beforeDestroy<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>criteria<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Do some stuff</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// After destroying a value.</span>
  afterDestroy<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>destroyedRecords<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Do some stuff</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/strapi/strapi/edit/master/docs/1.x.x/models.md" target="_blank" rel="noopener noreferrer">Improve this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
         <a href="/documentation/1.x.x/internationalization.html" class="prev">
          Internationalization
        </a></span> <span class="next"><a href="/documentation/1.x.x/request.html">
          Request
        </a> 
      </span></p></div> </div></div></div>
    <script src="/documentation/assets/js/16.5c84c402.js" defer></script><script src="/documentation/assets/js/app.a8210063.js" defer></script>
  </body>
</html>
